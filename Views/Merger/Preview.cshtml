@model Reference_Aids.ViewModels.ListForMergerViewModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    Layout = "_Layout";
    int i = 1;
}
<br>
<div class="container">
    <datalist id="send_lab_list">
        @foreach (var item in Model.ListSendLabs)
        {
            <option>@item.SendLabName</option>
        }
    </datalist>
    <datalist id="test_system_list">
        @foreach (var item in Model.ListTestSystems)
        {
            <option>@item.TestSystemName</option>
        }
    </datalist>
    <datalist id="send_district_list">
        @foreach (var item in Model.ListSendDistricts)
        {
            <option>@item.SendDistrictName</option>
        }
    </datalist>
    <datalist id="category_list">
        @foreach (var item in Model.ListCategories)
        {
            <option>@item.CategoryId</option>
        }
    </datalist>
    <datalist id="quality_serum_list">
        @foreach (var item in Model.ListQualitySerums)
        {
            <option>@item.QualitySerumName</option>
        }
    </datalist>
    <br>
    
        @{
            @foreach (var item in Model.Patients)
            {
                <div class="row g-0">
                    <div class="col-sm-3">
                        <div class="col-sm-10" style="margin-bottom: 7px">
                            <input disabled placeholder="Ид пациента(Auto)" type="text" class="form-control" name="PatientId_@i" value="@item.TblPatientCards[0].PatientId">
                        </div>
                        <div class="col-sm-10" style="margin-bottom: 7px">
                            <input disabled placeholder="Фамилия" type="text" class="form-control" value="@item.TblPatientCards[0].FamilyName">
                        </div>
                        <div class="col-sm-10" style="margin-bottom: 7px">
                            <input disabled placeholder="Имя" type="text" class="form-control" value="@item.TblPatientCards[0].FirstName">
                        </div>
                        <div class="col-sm-10" style="margin-bottom: 7px">
                            <input disabled placeholder="Отчество" type="text" class="form-control" value="@item.TblPatientCards[0].ThirdName">
                        </div>
                        <div class="col-sm-10" style="margin-bottom: 7px">
                            <input disabled placeholder="Дата рождения" type="date" class="form-control" id="date" value="@item.TblPatientCards[0].BirthDate.ToString("yyyy-MM-dd")">
                        </div>
                        <div class="col-sm-10" style="margin-bottom: 7px">
                            <input disabled placeholder="Пол" type="text" class="form-control" value="@item.TblPatientCards[0].SexName()">
                        </div>
                        <div class="col-sm-10" style="margin-bottom: 7px">
                            <input disabled placeholder="Телефон" type="text" class="form-control" value="@item.TblPatientCards[0].PhoneNum">
                        </div>
                    </div>
                    <div class="col-sm-9">
                        <label>Обл ИФА</label>
                        <table class="table table-bordered table-blot" style="margin-bottom: 0px">
                            <thead>
                                <tr>
                                    <th scope="col" width="150px">Дата забора крови</th>
                                    <th scope="col" width="170px">Тест система</th>
                                    <th scope="col" width="170px">Отпр. лаб.</th>
                                    <th scope="col" width="170px">Кем напрв.</th>
                                    <th scope="col" width="70px">Cut off</th>
                                    <th scope="col" width="92px">Результат</th>
                                    <th scope="col" width="80px">КП</th>
                                </tr>
                            </thead>
                        </table>
                        <div style="overflow-x: auto; height: 210px">
                            <table class="table table-bordered table-blot">
                                <tbody>
                                    @foreach (var distBlot in item.TblDistrictBlots)
                                    {
                                        <tr>
                                            <td width="150px"><input type="date" class="form-control tbl-input" value="@distBlot.DBlot.ToString("yyyy-MM-dd")" disabled></td>
                                            <td width="170px"><input type="text" class="form-control tbl-input" value="@distBlot.TestSystemName()" disabled></td>
                                            <td width="170px"><input type="text" class="form-control tbl-input" value="@distBlot.SendLabName()" disabled></td>
                                            <td width="170px"><input type="text" class="form-control tbl-input" value="@distBlot.SendDistrictName()" disabled></td>
                                            <td width="70px"><input type="text" class="form-control tbl-input" value="@distBlot.CutOff" disabled></td>
                                            <td width="92px"><input type="text" class="form-control tbl-input" value="@distBlot.BlotResult" disabled></td>
                                            <td width="80px"><input type="text" class="form-control tbl-input" value="@distBlot.BlotCoefficient" disabled></td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row g-0">
                        <div class="col-sm-2" style="margin-right: 12px">
                            <input disabled placeholder="Регион" autocomplete="fals" type="text" class="form-control" value="@item.TblPatientCards[0].RegionName()">
                        </div>
                        <div class="col-sm-2" style="margin-right: 12px">
                            <input disabled placeholder="Город" autocomplete="fals" type="text" class="form-control" value="@item.TblPatientCards[0].CityName">
                        </div>
                        <div class="col-sm-2" style="margin-right: 12px">
                            <input disabled placeholder="Населённый пункт" autocomplete="fals" type="text" class="form-control" value="@item.TblPatientCards[0].AreaName">
                        </div>
                        <div class="col-sm-2" style="margin-right: 62px">
                            <input disabled placeholder="Улица" type="text" autocomplete="fals" class="form-control" value="@item.TblPatientCards[0].AddrStreat">
                        </div>
                        <div class="col-sm-1" style="margin-right: 5px">
                            <input disabled placeholder="Дом" type="text" class="form-control" value="@item.TblPatientCards[0].AddrHome">
                        </div>
                        <div class="col-sm-1" style="margin-right: 5px">
                            <input disabled placeholder="Корп." type="text" class="form-control" value="@item.TblPatientCards[0].AddrCorps">
                        </div>
                        <div class="col-sm-1">
                            <input disabled placeholder="Кв." type="text" class="form-control" value="@item.TblPatientCards[0].AddrFlat">
                        </div>
                    </div>
                    <div class="row g-0" style="margin-top: 1rem">
                        <textarea placeholder="Комментарий" autocomplete="fals" cols="100" rows="3" disabled>@item.TblPatientCards[0].PatientCom</textarea>
                    </div>
                </div>
                <br>
                <div class="row g-0">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Рег. ном.</th>
                                <th scope="col">Ном. в списке</th>
                                <th scope="col">Дата поступления</th>
                                <th scope="col">Дата забора крови</th>
                                <th scope="col">Отпр. лаб.</th>
                                <th scope="col">Кем напр.</th>
                                <th scope="col">Категория</th>
                                <th scope="col">Качество сывороки</th>
                                <th scope="col">Анон.</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var incBlood in item.TblIncomingBloods)
                            {
                                <tr>
                                    <td><input type="text" class="form-control" name='' value="@incBlood.NumIfa" disabled></td>
                                    <td><input type="text" class="form-control" name='' value="@incBlood.NumInList" disabled></td>
                                    <td><input type="date" class="form-control" name='' value="@incBlood.DateBloodImport.ToString("yyyy-MM-dd")" disabled></td>
                                    <td><input type="date" class="form-control" name='' value="@incBlood.DateBloodSampling.ToString("yyyy-MM-dd")" disabled></td>
                                    <td><input type="text" class="form-control" name='' value="@incBlood.SendLabName()" disabled></td>
                                    <td><input type="text" class="form-control" name='' value="@incBlood.SendDistrictName()" disabled></td>
                                    <td><input type="text" class="form-control" name='' value="@incBlood.CategoryPatientId" disabled></td>
                                    <td><input type="text" class="form-control" name='' value="@incBlood.QualitySerumName()" disabled></td>
                                    <td><input type="checkbox" class="form-check-input" name='' value="" disabled></td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <br>
                <br>
                i++;
            }
        }
    <div class="row g-0">
        <div class="col-2">
            <a class="btn btn-outline-success btn-sm" asp-controller="Merger" asp-action="Merger" asp-route-PatientId_1="@Model.Patients[0].TblPatientCards[0].PatientId" asp-route-PatientId_2="@Model.Patients[1].TblPatientCards[0].PatientId">Объеденить</a>
        </div>
    </div>